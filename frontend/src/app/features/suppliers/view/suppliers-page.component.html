<section class="page suppliers">
  <h2>Dodavatelé</h2>

  <div class="toolbar">
    <button mat-button class="add-button" (click)="router.navigate(['/suppliers/new'])">
      <mat-icon color="white" aria-label="add">add</mat-icon>
      Nový dodavatel
    </button>
  </div>

  @if (loading()) {
    <mat-progress-bar style="width: 80%; margin: auto" mode="indeterminate"></mat-progress-bar>
  }

  @if (error) {
    <div class="error">{{ error }}</div>
  }

  @if (!loading() && !error && dataSource.data.length) {
    <div>
    <table mat-table [dataSource]="dataSource" matSort class="suppliers-table">

      <ng-container matColumnDef="index">
        <th mat-header-cell *matHeaderCellDef>#</th>
        <td mat-cell *matCellDef="let s; let i = index">{{ i + 1 }}</td>
      </ng-container>

      <ng-container matColumnDef="tradeName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Obchodní jméno</th>
        <td mat-cell *matCellDef="let s">{{ s.tradeName }}</td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let s">{{ s.email }}</td>
      </ng-container>

      <ng-container matColumnDef="phoneNumber">
        <th mat-header-cell *matHeaderCellDef>Telefon</th>
        <td mat-cell *matCellDef="let s">{{ s.phoneNumber }}</td>
      </ng-container>

      <ng-container matColumnDef="city">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Město</th>
        <td mat-cell *matCellDef="let s">{{ s.city }}</td>
      </ng-container>

      <ng-container matColumnDef="ico">
        <th mat-header-cell *matHeaderCellDef>IČO</th>
        <td mat-cell *matCellDef="let s">{{ s.ico || '-' }}</td>
      </ng-container>

      <ng-container matColumnDef="dic">
        <th mat-header-cell *matHeaderCellDef>DIČ</th>
        <td mat-cell *matCellDef="let s">{{ s.dic || '-' }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns;"
        class="clickable-row"
        (click)="router.navigate(['/suppliers/edit', row.id])"
      ></tr>

    </table>
      <mat-paginator class="paginator"
                     [length]="totalElements"
                     [pageSize]="currentSize"
                     [pageSizeOptions]="[5, 10, 25, 50]"
                     [showFirstLastButtons]="true"
                     [disabled]="loading()"
                     (page)="pageUpdate($event)">
      </mat-paginator>
    </div>
  }

  @if (!loading() && !error && !dataSource.data.length) {
    <p>Žádní dodavatelé k zobrazení.</p>
  }
</section>

