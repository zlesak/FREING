<section class="page home">
  <app-common-filter
    [users]="users"
    [statusOptions]="statusOptions"
    [currencyOptions]="currencyOptions"
    [showCustomer]="keycloakService.hasAdminAccess"
    [statusTranslation]="statusTranslation"
    [responsiveService]="responsiveService"
    [initialValues]="filterForm.value"
    (filter)="onFilter($event)"
  />

  <div class="quick-stats" [ngClass]="responsiveService.isMobile ? 'mobile' : ''">
    <div class="stat-card">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-content">
        <div class="stat-label">Celkem Faktur</div>
        <div class="stat-value">{{ quickStats().totalCount }}</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ’°</div>
      <div class="stat-content">
        <div class="stat-label">CelkovÃ¡ ÄŒÃ¡stka</div>
        <div class="stat-value">{{ quickStats().totalAmount | number:'1.0-2' }} KÄ</div>
      </div>
    </div>
    <div class="stat-card success">
      <div class="stat-icon">âœ…</div>
      <div class="stat-content">
        <div class="stat-label">Zaplaceno</div>
        <div class="stat-value">{{ quickStats().paidCount }}</div>
        <div class="stat-sub">{{ quickStats().paidAmount | number:'1.0-2' }} KÄ</div>
      </div>
    </div>
    <div class="stat-card warning">
      <div class="stat-icon">â³</div>
      <div class="stat-content">
        <div class="stat-label">ÄŒekÃ¡ na Ãšhradu</div>
        <div class="stat-value">{{ quickStats().pendingCount }}</div>
      </div>
    </div>
    <div class="stat-card danger">
      <div class="stat-icon">âš ï¸</div>
      <div class="stat-content">
        <div class="stat-label">Po Splatnosti</div>
        <div class="stat-value">{{ quickStats().overdueCount }}</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ“ˆ</div>
      <div class="stat-content">
        <div class="stat-label">PrÅ¯mÄ›rnÃ¡ ÄŒÃ¡stka</div>
        <div class="stat-value">{{ quickStats().avgAmount | number:'1.0-2' }} KÄ</div>
      </div>
    </div>
  </div>

  <div class="overview" [ngClass]="responsiveService.isMobile ? 'mobile' : ''">
    @if(keycloakService.hasAdminAccess){
      <!-- Admin view -->
      <div class="chart-card">
        <invoice-chart-pie
          [data]="chartDataStatuses()"
          [title]="'PoÄet Faktur Dle Statusu'"
        ></invoice-chart-pie>
      </div>
      <div class="chart-card">
        <invoice-chart-doughnut
          [data]="chartDataAmountByStatus()"
          [title]="'CelkovÃ¡ ÄŒÃ¡stka Dle Statusu'"
        ></invoice-chart-doughnut>
      </div>
      <div class="chart-card">
        <invoice-chart-pie
          [data]="chartDataCustomers()"
          [title]="'PoÄet Faktur Dle ZÃ¡kaznÃ­ka'"
        ></invoice-chart-pie>
      </div>
      <div class="chart-card">
        <invoice-chart-pie
          [data]="chartDataCurrency()"
          [title]="'Distribuce MÄ›n'"
        ></invoice-chart-pie>
      </div>
      <div class="chart-card">
        <invoice-chart-stacked-bar
          [data]="filteredInvoices()"
          [statusColors]="statusColors()"
        ></invoice-chart-stacked-bar>
      </div>
      <div class="chart-card">
        <invoice-chart-horizontal-bar
          [data]="chartDataTopCustomers()"
          [title]="'Top 10 ZÃ¡kaznÃ­kÅ¯ Dle ÄŒÃ¡stky'"
        ></invoice-chart-horizontal-bar>
      </div>
    } @else {
      <!-- User view -->
      <div class="chart-card">
        <invoice-chart-pie
          [data]="chartDataStatuses()"
          [title]="'PoÄet Faktur Dle Statusu'"
        ></invoice-chart-pie>
      </div>
      <div class="chart-card">
        <invoice-chart-doughnut
          [data]="chartDataAmountByStatus()"
          [title]="'CelkovÃ¡ ÄŒÃ¡stka Dle Statusu'"
        ></invoice-chart-doughnut>
      </div>
      <div class="chart-card">
        <invoice-chart-line
          [data]="filteredInvoices()"
        ></invoice-chart-line>
      </div>
      <div class="chart-card">
        <invoice-chart-bar
          [data]="filteredInvoices()"
        ></invoice-chart-bar>
      </div>
      <div class="chart-card">
        <invoice-chart-stacked-bar
          [data]="filteredInvoices()"
          [statusColors]="statusColors()"
        ></invoice-chart-stacked-bar>
      </div>
      <div class="chart-card">
        <invoice-chart-pie
          [data]="chartDataCurrency()"
          [title]="'Distribuce MÄ›n'"
        ></invoice-chart-pie>
      </div>
    }

  </div>
</section>
