<div class="payments-container">
  <mat-card class="payment-card">
    <mat-card-content>
      <div class="payment-header">
        <h2>游눱 Platba faktury</h2>
      </div>

      @if (loading()) {
        <div class="loading-container">
          <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
          <p>Zpracov치v치m platbu...</p>
        </div>
      }

      @if (error()) {
        <div class="error-message">
          <mat-icon>error</mat-icon>
          <p>{{ error() }}</p>
        </div>
      }

      @if (!loading() && !paymentCreated() && !error()) {
        <div class="payment-info">
          <div class="info-row">
            <span class="label">Faktura 캜.:</span>
            <span class="value">{{ invoiceId() }}</span>
          </div>
          <div class="info-row">
            <span class="label">캛치stka k 칰hrad캩:</span>
            <span class="value amount">{{ amount() }} {{ currency() }}</span>
          </div>
          @if (description()) {
            <div class="info-row">
              <span class="label">Popis:</span>
              <span class="value">{{ description() }}</span>
            </div>
          }
        </div>

        <div class="payment-methods">
          <h3>Zp콢sob platby</h3>
          <div class="method-card active">
            <mat-icon>account_balance</mat-icon>
            <div>
              <strong>Mock Payment Gateway</strong>
              <p>Testovac칤 platebn칤 br치na pro v칳voj</p>
            </div>
          </div>
        </div>
      }

      @if (paymentCreated() && approvalUrl()) {
        <div class="success-message">
          <mat-icon>check_circle</mat-icon>
          <h3>Platba byla vytvo콏ena</h3>
          <p>Budete p콏esm캩rov치ni na str치nku pro schv치len칤 platby...</p>
          <p class="order-id">Order ID: {{ orderId() }}</p>
        </div>
      }
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-button (click)="goBack()" [disabled]="loading()">
        <mat-icon>arrow_back</mat-icon>
        Zp캩t
      </button>

      @if (!paymentCreated() && !loading()) {
        <button mat-raised-button color="primary" (click)="createPayment()">
          <mat-icon>payment</mat-icon>
          Zaplatit
        </button>
      }

      @if (paymentCreated() && approvalUrl()) {
        <a [href]="approvalUrl()" mat-raised-button color="accent">
          <mat-icon>open_in_new</mat-icon>
          P콏ej칤t na platbu
        </a>
      }
    </mat-card-actions>
  </mat-card>
</div>

